type: sunspec
params:
- name: usage
  choice: [ "grid", "pv", "battery" ]
- name: uri
  default: 192.0.2.2
- name: id
  default: 1
  hint: modbus id
render: |
  type: modbus
  model: sunspec
  uri: {{ .uri }}
  id: {{ .id }}
  {{- if eq .usage "grid" }}
  power: 203:W # sunspec 3-phase meter power reading
  {{- end -}}
  {{- if eq .usage "battery" }}
  soc: ChargeState
  {{- end -}}
